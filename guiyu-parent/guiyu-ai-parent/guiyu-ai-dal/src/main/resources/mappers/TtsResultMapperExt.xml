<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guiji.ai.dao.TtsResultMapperExt">

	<!-- 获取合成结果 -->
	<select id="getTtsTransferResult" resultType="java.util.HashMap">
		SELECT content, audio_url FROM tts_result
		WHERE bus_id = #{busId,jdbcType=VARCHAR}
	</select>

	<!-- 查询当前时间之前10分钟的GPU分配情况 -->
	<select id="selectTenMinutesBefore" resultType="java.util.HashMap">
		SELECT model, COUNT(*) count FROM tts_result
		WHERE create_time BETWEEN date_add(#{now,jdbcType=TIMESTAMP}, INTERVAL - 10 MINUTE)
		AND #{now,jdbcType=TIMESTAMP}
		GROUP BY model
	</select>

</mapper>